# BlueNotebook - Documentation Technique V2.0.2

## Introduction

**BlueNotebook** est un Ã©diteur de texte Markdown moderne dÃ©veloppÃ© en Python, conÃ§u pour offrir une expÃ©rience d'Ã©dition fluide avec un aperÃ§u en temps rÃ©el. L'application combine la simplicitÃ© de la syntaxe Markdown avec la puissance d'un rendu HTML professionnel.

Copyright (C) 2025 Jean-Marc DIGNE

Ce programme est un logiciel libre ; vous pouvez le redistribuer ou le modifier conformÃ©ment aux termes de la Licence Publique GÃ©nÃ©rale GNU telle que publiÃ©e par la Free Software Foundation ; soit la version 3 de la licence, soit (Ã  votre choix) toute version ultÃ©rieure.

## Table des MatiÃ¨res

1.  [Vue d'ensemble](#vue-densemble)
2.  [Architecture et Choix Techniques](#architecture-et-choix-techniques)
3.  [Arborescence des Fichiers](#arborescence-des-fichiers)
4.  [Description des Composants](#description-des-composants)
5.  [FonctionnalitÃ©s DÃ©taillÃ©es](#fonctionnalitÃ©s-dÃ©taillÃ©es)
6.  [Arborescence des Menus](#arborescence-des-menus)
7.  [Performance et Optimisations](#performance-et-optimisations)
8.  [Ã‰volutions Possibles](#Ã©volutions-possibles)

---

### SpÃ©cifications techniques

- **Langage** : Python 3.7+
- **Framework GUI** : PyQt5
- **Moteur de rendu HTML** : QWebEngine (Chromium)
- **GÃ©nÃ©ration PDF** : WeasyPrint
- **Parser Markdown** : python-markdown avec extensions
- **Coloration syntaxique** : Pygments
- **Architecture** : MVC (Model-View-Controller)
- **Plateforme** : Cross-platform (Windows, macOS, Linux)

---

## Architecture et Choix Techniques

### Paradigme architectural

L'application suit une architecture **MVC modifiÃ©e** adaptÃ©e aux applications desktop :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Model      â”‚    â”‚      View       â”‚    â”‚   Controller    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  â€¢ FileHandler  â”‚â—„â”€â”€â–ºâ”‚  â€¢ MainWindow   â”‚â—„â”€â”€â–ºâ”‚  â€¢ MainWindow   â”‚
â”‚  â€¢ MarkdownParserâ”‚    â”‚  â€¢ Editor       â”‚    â”‚  â€¢ Event Logic  â”‚
â”‚  â€¢ Settings     â”‚    â”‚  â€¢ Preview      â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Choix de PyQt5 vs alternatives

| CritÃ¨re | PyQt5 | Tkinter | Electron | PySide6 |
|---|---|---|---|---|
| **Performance** | â­â­â­â­â­ | â­â­â­ | â­â­ | â­â­â­â­â­ |
| **Rendu HTML** | â­â­â­â­â­ | â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **Natif** | â­â­â­â­â­ | â­â­â­â­ | â­â­ | â­â­â­â­â­ |
| **Distribution** | â­â­â­â­ | â­â­â­â­â­ | â­â­ | â­â­â­ |
| **Ã‰cosystÃ¨me** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­ |

**Justification** : PyQt5 a Ã©tÃ© choisi pour :
- **QWebEngine** : Moteur Chromium intÃ©grÃ© pour un rendu HTML fidÃ¨le.
- **MaturitÃ©** : Ã‰cosystÃ¨me stable et documentation complÃ¨te.
- **Performance** : Applications natives, pas de VM JavaScript.
- **FonctionnalitÃ©s** : Widgets avancÃ©s, systÃ¨me de signaux/slots robuste.

### Architecture des donnÃ©es

```python
# Flux de donnÃ©es unidirectionnel
Markdown Text (Editor) â†’ Parser â†’ HTML â†’ QWebEngine (Preview)
     â†‘                                            â†“
File I/O â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ User Actions â”€â”€â”€â”€â”€â”€â”€â”€ DOM Events
```

---

## Arborescence des fichiers
```text
bluenotebook/
â”œâ”€â”€ ğŸ“‚ core/                     # Logique mÃ©tier (ModÃ¨le)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ default_excluded_words.py # Mots exclus par dÃ©faut de l'indexation
â”‚   â”œâ”€â”€ quote_fetcher.py        # RÃ©cupÃ©ration de la citation du jour
â”‚   â”œâ”€â”€ settings.py             # Gestion des prÃ©fÃ©rences utilisateur
â”‚   â”œâ”€â”€ tag_indexer.py          # Indexation asynchrone des tags
â”‚   â””â”€â”€ word_indexer.py         # Indexation asynchrone des mots
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                     # Documentation du projet
â”‚   â””â”€â”€ V2.0.2_bluenotebook_technical_doc.md
â”‚
â”œâ”€â”€ ğŸ“‚ gui/                      # Interface utilisateur (Vue)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ editor.py               # Widget de l'Ã©diteur Markdown
â”‚   â”œâ”€â”€ main_window.py          # FenÃªtre principale de l'application
â”‚   â”œâ”€â”€ navigation.py           # Panneau de navigation (calendrier, recherche...)
â”‚   â”œâ”€â”€ outline.py              # Panneau du plan du document
â”‚   â”œâ”€â”€ preferences_dialog.py   # BoÃ®te de dialogue des prÃ©fÃ©rences
â”‚   â”œâ”€â”€ preview.py              # Widget de l'aperÃ§u HTML
â”‚   â””â”€â”€ word_cloud.py           # Widget pour les nuages de mots/tags
â”‚
â”œâ”€â”€ ğŸ“‚ resources/                # Ressources statiques
â”‚   â”œâ”€â”€ ğŸ“‚ css_preview/         # ThÃ¨mes CSS pour l'aperÃ§u HTML
â”‚   â”‚   â”œâ”€â”€ default_preview.css
â”‚   â”‚   â”œâ”€â”€ github-markdown-dark_preview.css
â”‚   â”‚   â”œâ”€â”€ github-markdown-light_preview.css
â”‚   â”‚   â””â”€â”€ github-markdown_preview.css
â”‚   â”œâ”€â”€ ğŸ“‚ html/
â”‚   â”‚   â””â”€â”€ aide_en_ligne.html
â”‚   â”œâ”€â”€ ğŸ“‚ icons/
â”‚   â”‚   â”œâ”€â”€ bluenotebook.ico
â”‚   â”‚   â””â”€â”€ bluenotebook.png
â”‚   â””â”€â”€ ğŸ“‚ images/
â”‚       â””â”€â”€ bluenotebook_256-x256_fond_blanc.png
â”‚
â”œâ”€â”€ .gitignore                  # Fichiers ignorÃ©s par Git
â”œâ”€â”€ changelog.md                # Journal des modifications
â”œâ”€â”€ LICENSE                     # Licence du logiciel (GNU GPL)
â”œâ”€â”€ main.py                     # Point d'entrÃ©e de l'application
â”œâ”€â”€ README.md                   # Documentation gÃ©nÃ©rale
â”œâ”€â”€ requirements.txt            # DÃ©pendances Python
â”œâ”€â”€ run_bluenotebook.bat        # Script de lancement pour Windows
â””â”€â”€ run_bluenotebook.sh         # Script de lancement pour Linux/macOS

```

### Justification de l'organisation

- **SÃ©paration des responsabilitÃ©s** : GUI, logique mÃ©tier, et ressources sÃ©parÃ©es.
- **ModularitÃ©** : Chaque composant peut Ãªtre testÃ© et modifiÃ© indÃ©pendamment.
- **ExtensibilitÃ©** : Ajout facile de nouveaux composants GUI ou parsers.
- **MaintenabilitÃ©** : Structure claire pour les nouveaux dÃ©veloppeurs.

---

## Description des Composants

### `MainWindow` (`gui/main_window.py`)

**RÃ´le** : Orchestrateur principal, gestion des Ã©vÃ©nements et coordination des composants.

```python
class MainWindow(QMainWindow):
    # ResponsabilitÃ©s :
    # - Gestion du cycle de vie et des Ã©vÃ©nements principaux.
    # - Coordination entre tous les panneaux (Navigation, Plan, Ã‰diteur, AperÃ§u).
    # - CrÃ©ation des menus, barres d'outils et de la barre de statut.
    # - Logique de gestion des fichiers (ouverture, sauvegarde, export HTML et PDF).
    # - Interface avec le systÃ¨me de gestion des paramÃ¨tres.
```

**FonctionnalitÃ©s clÃ©s** :
- **Timer de mise Ã  jour** : Ã‰vite les rafraÃ®chissements trop frÃ©quents de l'aperÃ§u (300ms).
- **Gestion d'Ã©tat** : Suivi des modifications, fichier actuel.
- **Signaux PyQt5** : Communication asynchrone entre composants.
- **Validation de fermeture** : Protection contre la perte de donnÃ©es.

### `Editor` (`gui/editor.py`)

**RÃ´le** : Ã‰diteur de texte avec coloration syntaxique Markdown.

```python
class MarkdownEditor(QWidget):
    # Composants intÃ©grÃ©s :
    # - QTextEdit : Zone de saisie
    # - MarkdownHighlighter : Coloration syntaxique
    # - LineNumberArea : Affichage des numÃ©ros de ligne
```

**Architecture de la coloration syntaxique** :

```python
class MarkdownHighlighter(QSyntaxHighlighter):
    def highlightBlock(self, text):
        # Regex patterns pour :
        # - Titres (# ## ###)
        # - Emphases (**gras**, *italique*)  
        # - Code (`inline`, ```blocks```)
        # - Liens, Tags, etc.
```

### `Preview` (`gui/preview.py`)

**RÃ´le** : Rendu HTML en temps rÃ©el avec QWebEngine.

```python
class MarkdownPreview(QWidget):
    # Pipeline de rendu :
    # Markdown â†’ python-markdown â†’ HTML + CSS â†’ QWebEngine
```

**Extensions Markdown utilisÃ©es** :
- `tables`, `fenced_code`, `codehilite`, `toc`, `attr_list`, `footnotes`, `sane_lists`.

**Affichage des images locales** :
Pour des raisons de sÃ©curitÃ©, `QWebEngine` bloque par dÃ©faut l'accÃ¨s aux fichiers locaux. Pour contourner ce problÃ¨me, la mÃ©thode `setHtml` est appelÃ©e avec une URL de base `file:///`, autorisant ainsi le chargement des images via des chemins absolus.

---

## FonctionnalitÃ©s DÃ©taillÃ©es

### Exportation du Journal en PDF

La version 2.0.2 introduit une fonctionnalitÃ© d'exportation PDF avancÃ©e, utilisant la bibliothÃ¨que **WeasyPrint** pour un rendu de haute qualitÃ© et une pagination prÃ©cise.

#### 1. DÃ©pendance

Cette fonctionnalitÃ© requiert l'installation de WeasyPrint :
```bash
pip install weasyprint
```
L'application gÃ¨re l'absence de cette bibliothÃ¨que en affichant un message d'erreur informatif Ã  l'utilisateur.

#### 2. Processus d'Exportation

L'exportation est dÃ©clenchÃ©e via `Fichier > Exporter Journal PDF...`.

1.  **BoÃ®te de dialogue de configuration** : Une fenÃªtre modale (`ExportPdfDialog`) permet Ã  l'utilisateur de personnaliser l'export :
    *   **Plage de dates** : SÃ©lection des dates de dÃ©but et de fin. Par dÃ©faut, la plage couvre l'intÃ©gralitÃ© du journal.
    *   **Titre du document** : Titre pour la page de garde (dÃ©faut : "BlueNotebook Journal").
    *   **Nom de l'auteur**.
    *   **Photo de couverture** : Une image (JPG/PNG) pour la page de garde.

2.  **Persistance des paramÃ¨tres** : Pour amÃ©liorer l'expÃ©rience utilisateur, les paramÃ¨tres suivants sont sauvegardÃ©s dans `settings.json` et rÃ©utilisÃ©s lors des exports futurs :
    *   Le dernier rÃ©pertoire de destination utilisÃ©.
    *   Le titre du document.
    *   Le nom de l'auteur.

3.  **GÃ©nÃ©ration du HTML** :
    *   Une mÃ©thode `_prepare_pdf_html` collecte les notes dans la plage de dates sÃ©lectionnÃ©e.
    *   Elle gÃ©nÃ¨re un document HTML unique qui inclut :
        *   Une **page de garde** (`cover_page.html`) avec le titre, l'auteur, la photo, le logo et la plage de dates.
        *   Le contenu de chaque note, converti de Markdown en HTML.
        *   Des sauts de page CSS (`page-break-before: always`) sont insÃ©rÃ©s avant chaque nouvelle note.
        *   Le mÃªme thÃ¨me CSS que l'aperÃ§u HTML est appliquÃ© pour une cohÃ©rence visuelle.

4.  **GÃ©nÃ©ration Asynchrone du PDF** :
    *   La conversion du HTML en PDF, potentiellement longue, est effectuÃ©e dans un **thread sÃ©parÃ©** (`QThreadPool`) pour ne pas bloquer l'interface utilisateur.
    *   Pendant la gÃ©nÃ©ration, un message clignotant "Veuillez patienter..." est affichÃ© dans la barre de statut.
    *   La classe `PdfGenerator` (hÃ©ritant de `QRunnable`) utilise `weasyprint.HTML().write_pdf()` pour crÃ©er le fichier.

5.  **Structure du PDF final** :
    *   **Page de garde** : Titre, auteur, photo, etc.
    *   **Notes** : Chaque note sur une nouvelle page.
    *   **Pagination** : Un pied de page avec le numÃ©ro de page (`Page X / Y`) est automatiquement ajoutÃ© par WeasyPrint grÃ¢ce aux rÃ¨gles CSS `@page`.

#### 3. Diagramme de SÃ©quence

```mermaid
sequenceDiagram
    participant User
    participant MainWindow
    participant ExportPdfDialog
    participant PdfGenerator

    User->>MainWindow: Clique "Exporter Journal PDF..."
    MainWindow->>ExportPdfDialog: CrÃ©e et affiche la dialogue
    User->>ExportPdfDialog: SÃ©lectionne dates, titre, etc.
    ExportPdfDialog-->>MainWindow: Dialogue acceptÃ©e avec les options
    MainWindow->>MainWindow: _prepare_pdf_html()
    MainWindow->>MainWindow: Affiche "Veuillez patienter..."
    MainWindow->>PdfGenerator: Lance la gÃ©nÃ©ration asynchrone
    PdfGenerator->>PdfGenerator: weasyprint.HTML(html).write_pdf()
    PdfGenerator-->>MainWindow: Ã‰met signal pdf_generated(path)
    MainWindow->>MainWindow: Affiche "PDF gÃ©nÃ©rÃ© avec succÃ¨s"
```

### Gestion du rÃ©pertoire Journal

L'application gÃ¨re un rÃ©pertoire "Journal" pour stocker les notes quotidiennes.

**PrioritÃ© de configuration du rÃ©pertoire :**
1.  **Argument de ligne de commande** : `--journal "/chemin/vers/journal"`
2.  **Variable d'environnement** : `JOURNAL_DIRECTORY`
3.  **RÃ©pertoire par dÃ©faut** : `~/bluenotebook` (crÃ©Ã© s'il n'existe pas).

**FonctionnalitÃ©s du Journal :**
-   Au lancement, l'application ouvre automatiquement le fichier journal du jour (`YYYYMMJJ.md`).
-   La sauvegarde via `Fichier > Sauvegarder` enregistre dans le fichier journal du jour. Si le fichier existe, l'utilisateur peut choisir de remplacer son contenu ou d'ajouter le nouveau contenu Ã  la fin.
-   Le menu `Fichier > Ouvrir Journal` permet de sÃ©lectionner un nouveau rÃ©pertoire de journal Ã  la volÃ©e.

### Aide en ligne

L'application inclut une documentation en ligne accessible via le menu `Aide > Documentation en ligne`.
-   Le contenu de l'aide est un fichier HTML (`aide_en_ligne.html`) situÃ© dans `resources/html/`.
-   Un clic sur l'option de menu ouvre ce fichier dans le navigateur web par dÃ©faut de l'utilisateur.

### Gestion des Tags et des Mots

Le systÃ¨me de tags (`@@tag`) et l'indexation full-text des mots sont des fonctionnalitÃ©s centrales pour l'organisation et la recherche.

#### 1. Indexation Asynchrone

Au dÃ©marrage, les classes `TagIndexer` et `WordIndexer` (hÃ©ritant de `QRunnable`) scannent le rÃ©pertoire du journal dans des threads sÃ©parÃ©s.
- **DÃ©clenchement** : L'indexation est lancÃ©e si des notes ont Ã©tÃ© modifiÃ©es depuis la derniÃ¨re session.
- **Sortie** : Des fichiers `index_tags.json` et `index_words.json` sont gÃ©nÃ©rÃ©s, contenant les occurrences, le contexte, la date et le numÃ©ro de ligne pour chaque tag/mot.

#### 2. Recherche

L'interface de recherche dans le panneau de navigation utilise ces fichiers JSON pour fournir des rÃ©sultats instantanÃ©s.
- **RequÃªte** : L'utilisateur tape un mot ou un tag (prÃ©fixÃ© par `@@`).
- **RÃ©sultats** : Un panneau de rÃ©sultats affiche les occurrences triÃ©es par date.
- **Navigation** : Un clic sur un rÃ©sultat ouvre la note correspondante et positionne le curseur directement Ã  la bonne ligne.

---

## Arborescence ComplÃ¨te des Menus

Voici une vue d'ensemble de tous les menus de l'application, avec une description dÃ©taillÃ©e de chaque action.

```
ğŸ“ Fichier
â”œâ”€â”€ ğŸ“„ Nouveau (Ctrl+N) : CrÃ©e une nouvelle note vierge avec le modÃ¨le par dÃ©faut.
â”œâ”€â”€ ğŸ“‚ Ouvrir (Ctrl+O) : Ouvre un fichier Markdown existant depuis votre ordinateur.
â”œâ”€â”€ ---
â”œâ”€â”€ ğŸ’¾ Sauvegarder (Ctrl+S) : Enregistre la note actuelle. Si c'est une nouvelle note, elle devient la note du jour.
â”œâ”€â”€ ğŸ’¾ Sauvegarder sous... (Ctrl+Shift+S) : Enregistre la note actuelle dans un nouveau fichier de votre choix.
â”œâ”€â”€ ---
â”œâ”€â”€ ğŸ““ Ouvrir Journal : Permet de sÃ©lectionner un nouveau dossier qui servira de journal.
â”œâ”€â”€ ğŸ’¾ Sauvegarde Journal... : CrÃ©e une archive ZIP complÃ¨te de votre journal actuel.
â”œâ”€â”€ ğŸ”„ Restauration Journal... : Restaure un journal Ã  partir d'une archive ZIP (votre journal actuel est sauvegardÃ© avant).
â”œâ”€â”€ ---
â”œâ”€â”€ ğŸ“„ Exporter Journal PDF... : CrÃ©e un document PDF de votre journal, avec sÃ©lection de dates, titre et auteur.
â”œâ”€â”€ ğŸŒ Exporter HTML... : Exporte la note actuelle au format HTML, avec le style appliquÃ©.
â”œâ”€â”€ ---
â”œâ”€â”€ âš™ï¸ PrÃ©fÃ©rences... : Ouvre la fenÃªtre de personnalisation de l'application.
â””â”€â”€ ğŸšª Quitter (Ctrl+Q) : Ferme BlueNotebook.

âœï¸ Edition
â”œâ”€â”€ â†©ï¸ Annuler (Ctrl+Z) : Annule la derniÃ¨re action de frappe ou de formatage.
â”œâ”€â”€ â†ªï¸ RÃ©tablir (Ctrl+Y) : RÃ©tablit la derniÃ¨re action annulÃ©e.
â”œâ”€â”€ ---
â””â”€â”€ ğŸ” Rechercher (Ctrl+F) : Ouvre une boÃ®te de dialogue pour rechercher du texte dans l'Ã©diteur.

ğŸ‘ï¸ Affichage
â”œâ”€â”€ ğŸ§­ Basculer Navigation Journal (F6) : Affiche ou masque le panneau de gauche (calendrier, recherche, nuages).
â”œâ”€â”€ ğŸ“œ Basculer Plan du document (F7) : Affiche ou masque le panneau central qui liste les titres du document.
â””â”€â”€ ğŸ‘ï¸ Basculer AperÃ§u HTML (F5) : Affiche ou masque le panneau de droite qui montre le rendu de votre note.

ğŸ¨ Formater
â”œâ”€â”€ ğŸ“œ Titres
â”‚   â”œâ”€â”€ 1ï¸âƒ£ Niv 1 (#) : Applique un titre de niveau 1.
â”‚   â”œâ”€â”€ 2ï¸âƒ£ Niv 2 (##) : Applique un titre de niveau 2.
â”‚   â”œâ”€â”€ 3ï¸âƒ£ Niv 3 (###) : Applique un titre de niveau 3.
â”‚   â”œâ”€â”€ 4ï¸âƒ£ Niv 4 (####) : Applique un titre de niveau 4.
â”‚   â””â”€â”€ 5ï¸âƒ£ Niv 5 (#####) : Applique un titre de niveau 5.
â”œâ”€â”€ ğŸ¨ Style de texte
â”‚   â”œâ”€â”€ ğŸ…±ï¸ Gras (**texte**) : Met le texte sÃ©lectionnÃ© en gras.
â”‚   â”œâ”€â”€ *ï¸âƒ£ Italique (*texte*) : Met le texte sÃ©lectionnÃ© en italique.
â”‚   â”œâ”€â”€ ~ BarrÃ© (~~texte~~) : Barre le texte sÃ©lectionnÃ©.
â”‚   â””â”€â”€ ğŸ–ï¸ SurlignÃ© (==texte==) : Surligne le texte sÃ©lectionnÃ©.
â”œâ”€â”€ ğŸ’» Code
â”‚   â”œâ”€â”€ ` Monospace (inline) : Formate la sÃ©lection comme du code en ligne.
â”‚   â””â”€â”€ ``` Bloc de code : Encadre la sÃ©lection dans un bloc de code.
â”œâ”€â”€ ğŸ“‹ Listes
â”‚   â”œâ”€â”€ â€¢ Liste non ordonnÃ©e : Transforme les lignes sÃ©lectionnÃ©es en liste Ã  puces.
â”‚   â”œâ”€â”€ 1. Liste ordonnÃ©e : Transforme les lignes sÃ©lectionnÃ©es en liste numÃ©rotÃ©e.
â”‚   â””â”€â”€ â˜‘ï¸ Liste de tÃ¢ches : Transforme les lignes sÃ©lectionnÃ©es en liste de tÃ¢ches.
â”œâ”€â”€ ---
â””â”€â”€ ğŸ§¹ RaZ (Effacer le formatage) : Supprime tout le formatage Markdown de la sÃ©lection.

â• InsÃ©rer
â”œâ”€â”€ ğŸ–¼ï¸ Image (<img ...>) (Ctrl+I) : InsÃ¨re une image via une balise HTML `<img>`.
â”œâ”€â”€ ğŸ–¼ï¸ Image Markdown (Ctrl+Shift+I) : InsÃ¨re une image avec la syntaxe Markdown `!`.
â”œâ”€â”€ ğŸ”— Lien (URL ou email) (<url>) : Encadre une URL pour la rendre cliquable.
â”œâ”€â”€ ğŸ”— Lien Markdown (texte) : CrÃ©e un lien hypertexte avec la syntaxe ``.
â”œâ”€â”€ ğŸ”— Fichier : InsÃ¨re un lien vers un fichier local de votre ordinateur.
â”œâ”€â”€ ---
â”œâ”€â”€ â– Ligne Horizontale : InsÃ¨re une ligne de sÃ©paration (`---`).
â”œâ”€â”€ ğŸ’¬ Commentaire HTML : Transforme la sÃ©lection en commentaire HTML (`<!-- ... -->`).
â”œâ”€â”€ â–¦ Tableau : InsÃ¨re un modÃ¨le de tableau Markdown.
â”œâ”€â”€ ğŸ’¬ Citation : Formate la sÃ©lection comme une citation (`> ...`).
â”œâ”€â”€ ---
â”œâ”€â”€ ğŸ·ï¸ Tag (@@) : InsÃ¨re un tag `@@` ou transforme la sÃ©lection en tag.
â”œâ”€â”€ ğŸ•’ Heure : InsÃ¨re l'heure actuelle (HH:MM).
â”œâ”€â”€ ---
â””â”€â”€ ğŸ˜Š Emoji : Ouvre un sous-menu pour insÃ©rer rapidement des emojis courants.
    â”œâ”€â”€ ... (Liste complÃ¨te des emojis)

ğŸ”Œ IntÃ©grations
â””â”€â”€ âœ¨ Citation du jour : InsÃ¨re la citation du jour (rÃ©cupÃ©rÃ©e depuis Internet) dans votre note.

â“ Aide
â”œâ”€â”€ ğŸŒ Documentation en ligne : Ouvre le manuel d'aide dans votre navigateur.
â””â”€â”€ ğŸ’¡ Ã€ propos : Affiche les informations sur l'application, sa version et sa licence.
```

---

## Performance et optimisations

### Optimisations CPU

- **Coloration syntaxique incrÃ©mentale** : Seuls les blocs modifiÃ©s sont rÃ©analysÃ©s.
- **Rendu HTML diffÃ©rÃ©** : L'aperÃ§u n'est pas mis Ã  jour Ã  chaque frappe, mais aprÃ¨s une courte pause (300ms).
- **Indexation et Export PDF asynchrones** : Les tÃ¢ches longues s'exÃ©cutent en arriÃ¨re-plan pour ne pas geler l'interface.
- **Cache des expressions rÃ©guliÃ¨res** compilÃ©es pour la coloration syntaxique.

### Optimisations I/O

- **Indexation conditionnelle** : Les index ne sont reconstruits que si les fichiers du journal ont Ã©tÃ© modifiÃ©s.
- **DÃ©tection d'encodage** optimisÃ©e lors de la lecture des fichiers.

---

## Ã‰volutions possibles

### FonctionnalitÃ©s core (PrioritÃ© haute)

#### 1. Mode sombre / ThÃ¨mes personnalisables
```python
class ThemeManager:
    def apply_theme(self, theme_name: str):
        # Application CSS dynamique
        # Mise Ã  jour des couleurs de coloration syntaxique  
        # Persistance des prÃ©fÃ©rences utilisateur
```
**Impact** : AmÃ©lioration significative de l'expÃ©rience utilisateur, rÃ©duction de la fatigue oculaire.

#### 2. Gestion de projets multi-fichiers
```python
class ProjectManager:
    def __init__(self):
        self.project_tree = {}  # Arbre des fichiers
        self.watcher = QFileSystemWatcher()  # Surveillance changements
```
**FonctionnalitÃ©s** : Navigation dans une arborescence de fichiers, recherche full-text sur le projet.

### FonctionnalitÃ©s avancÃ©es (PrioritÃ© moyenne)

#### 3. AperÃ§u synchronisÃ© avec scroll liÃ©
```python
class SyncedPreview(MarkdownPreview):
    def sync_scroll_position(self, editor_position: float):
        # Calcul de correspondance ligne â†” Ã©lÃ©ment HTML
        # Animation fluide du scroll
```
**DÃ©fis techniques** : Mapping prÃ©cis entre texte source et DOM.

#### 4. Support LaTeX/MathJax pour formules mathÃ©matiques
```python
# Extension Markdown personnalisÃ©e
class MathExtension(Extension):
    def extendMarkdown(self, md):
        # Pattern recognition : $inline$ et $$block$$  
        # Rendu MathJax dans QWebEngine
```

#### 5. SystÃ¨me de plugins pour extensions
```python
class PluginManager:
    def load_plugin(self, plugin_path: str):
        # Chargement dynamique des modules Python
        # API standardisÃ©e pour extensions
```

### AmÃ©liorations techniques

#### 6. Architecture modulaire avancÃ©e
```python
# SystÃ¨me d'Ã©vÃ©nements dÃ©couplÃ©
class EventBus:
    def emit(self, event: str, data: Any): ...
    def subscribe(self, event: str, handler: callable): ...

# Injection de dÃ©pendances
class DIContainer:
    def register(self, interface: type, implementation: type): ...
    def resolve(self, interface: type) -> Any: ...
```

#### 7. IntÃ©gration Git
```python
class GitIntegration:
    def __init__(self, repo_path: str):
        self.repo = git.Repo(repo_path)
        
    def show_diff(self, file_path: str):
        # Affichage diffÃ©rences dans interface
        # Commit et push directement depuis l'Ã©diteur
```

---

## Conclusion

BlueNotebook reprÃ©sente une architecture moderne et extensible pour un Ã©diteur Markdown. Les choix techniques (PyQt5, QWebEngine, WeasyPrint) offrent un Ã©quilibre optimal entre performance, fonctionnalitÃ©s et maintenabilitÃ©.

L'architecture modulaire permet une Ã©volution progressive vers un Ã©cosystÃ¨me complet d'Ã©dition technique, tout en conservant la simplicitÃ© d'usage qui fait le succÃ¨s des Ã©diteurs Markdown.

---

*Documentation technique v2.0.2 - BlueNotebook*  
*GÃ©nÃ©rÃ©e le : 04 Octobre 2025*