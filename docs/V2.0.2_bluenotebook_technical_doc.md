# BlueNotebook - Documentation Technique V2.0.2

## Introduction

**BlueNotebook** est un √©diteur de texte Markdown moderne d√©velopp√© en Python, con√ßu pour offrir une exp√©rience d'√©dition fluide avec un aper√ßu en temps r√©el. L'application combine la simplicit√© de la syntaxe Markdown avec la puissance d'un rendu HTML professionnel.

Copyright (C) 2025 Jean-Marc DIGNE

Ce programme est un logiciel libre ; vous pouvez le redistribuer ou le modifier conform√©ment aux termes de la Licence Publique G√©n√©rale GNU telle que publi√©e par la Free Software Foundation ; soit la version 3 de la licence, soit (√† votre choix) toute version ult√©rieure.

## Table des Mati√®res

1.  [Vue d'ensemble](#vue-densemble)
2.  [Architecture et Choix Techniques](#architecture-et-choix-techniques)
3.  [Arborescence des Fichiers](#arborescence-des-fichiers)
4.  [Description des Composants](#description-des-composants)
5.  [Fonctionnalit√©s D√©taill√©es](#fonctionnalit√©s-d√©taill√©es)
6.  [Arborescence des Menus](#arborescence-des-menus)
7.  [Performance et Optimisations](#performance-et-optimisations)
8.  [√âvolutions Possibles](#√©volutions-possibles)

---

### Sp√©cifications techniques

- **Langage** : Python 3.7+
- **Framework GUI** : PyQt5
- **Moteur de rendu HTML** : QWebEngine (Chromium)
- **G√©n√©ration PDF** : WeasyPrint
- **Parser Markdown** : python-markdown avec extensions
- **Coloration syntaxique** : Pygments
- **Architecture** : MVC (Model-View-Controller)
- **Plateforme** : Cross-platform (Windows, macOS, Linux)

---

## Architecture et Choix Techniques

### Paradigme architectural

L'application suit une architecture **MVC modifi√©e** adapt√©e aux applications desktop :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Model      ‚îÇ    ‚îÇ      View       ‚îÇ    ‚îÇ   Controller    ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ  ‚Ä¢ FileHandler  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  ‚Ä¢ MainWindow   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  ‚Ä¢ MainWindow   ‚îÇ
‚îÇ  ‚Ä¢ MarkdownParser‚îÇ    ‚îÇ  ‚Ä¢ Editor       ‚îÇ    ‚îÇ  ‚Ä¢ Event Logic  ‚îÇ
‚îÇ  ‚Ä¢ Settings     ‚îÇ    ‚îÇ  ‚Ä¢ Preview      ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Choix de PyQt5 vs alternatives

| Crit√®re | PyQt5 | Tkinter | Electron | PySide6 |
|---|---|---|---|---|
| **Performance** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Rendu HTML** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Natif** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Distribution** | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **√âcosyst√®me** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |

**Justification** : PyQt5 a √©t√© choisi pour :
- **QWebEngine** : Moteur Chromium int√©gr√© pour un rendu HTML fid√®le.
- **Maturit√©** : √âcosyst√®me stable et documentation compl√®te.
- **Performance** : Applications natives, pas de VM JavaScript.
- **Fonctionnalit√©s** : Widgets avanc√©s, syst√®me de signaux/slots robuste.

### Architecture des donn√©es

```python
# Flux de donn√©es unidirectionnel
Markdown Text (Editor) ‚Üí Parser ‚Üí HTML ‚Üí QWebEngine (Preview)
     ‚Üë                                            ‚Üì
File I/O ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ User Actions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ DOM Events
```

---

## Arborescence des fichiers
```text
bluenotebook/
‚îú‚îÄ‚îÄ üìÇ core/                     # Logique m√©tier (Mod√®le)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ default_excluded_words.py # Mots exclus par d√©faut de l'indexation
‚îÇ   ‚îú‚îÄ‚îÄ quote_fetcher.py        # R√©cup√©ration de la citation du jour
‚îÇ   ‚îú‚îÄ‚îÄ settings.py             # Gestion des pr√©f√©rences utilisateur
‚îÇ   ‚îú‚îÄ‚îÄ tag_indexer.py          # Indexation asynchrone des tags
‚îÇ   ‚îî‚îÄ‚îÄ word_indexer.py         # Indexation asynchrone des mots
‚îÇ
‚îú‚îÄ‚îÄ üìÇ docs/                     # Documentation du projet
‚îÇ   ‚îî‚îÄ‚îÄ V2.0.2_bluenotebook_technical_doc.md
‚îÇ
‚îú‚îÄ‚îÄ üìÇ gui/                      # Interface utilisateur (Vue)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ editor.py               # Widget de l'√©diteur Markdown
‚îÇ   ‚îú‚îÄ‚îÄ main_window.py          # Fen√™tre principale de l'application
‚îÇ   ‚îú‚îÄ‚îÄ navigation.py           # Panneau de navigation (calendrier, recherche...)
‚îÇ   ‚îú‚îÄ‚îÄ outline.py              # Panneau du plan du document
‚îÇ   ‚îú‚îÄ‚îÄ preferences_dialog.py   # Bo√Æte de dialogue des pr√©f√©rences
‚îÇ   ‚îú‚îÄ‚îÄ preview.py              # Widget de l'aper√ßu HTML
‚îÇ   ‚îî‚îÄ‚îÄ word_cloud.py           # Widget pour les nuages de mots/tags
‚îÇ
‚îú‚îÄ‚îÄ üìÇ resources/                # Ressources statiques
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ css_preview/         # Th√®mes CSS pour l'aper√ßu HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ default_preview.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github-markdown-dark_preview.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github-markdown-light_preview.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ github-markdown_preview.css
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ html/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ aide_en_ligne.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ icons/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bluenotebook.ico
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bluenotebook.png
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ images/
‚îÇ       ‚îî‚îÄ‚îÄ bluenotebook_256-x256_fond_blanc.png
‚îÇ
‚îú‚îÄ‚îÄ .gitignore                  # Fichiers ignor√©s par Git
‚îú‚îÄ‚îÄ changelog.md                # Journal des modifications
‚îú‚îÄ‚îÄ LICENSE                     # Licence du logiciel (GNU GPL)
‚îú‚îÄ‚îÄ main.py                     # Point d'entr√©e de l'application
‚îú‚îÄ‚îÄ README.md                   # Documentation g√©n√©rale
‚îú‚îÄ‚îÄ requirements.txt            # D√©pendances Python
‚îú‚îÄ‚îÄ run_bluenotebook.bat        # Script de lancement pour Windows
‚îî‚îÄ‚îÄ run_bluenotebook.sh         # Script de lancement pour Linux/macOS

```

### Justification de l'organisation

- **S√©paration des responsabilit√©s** : GUI, logique m√©tier, et ressources s√©par√©es.
- **Modularit√©** : Chaque composant peut √™tre test√© et modifi√© ind√©pendamment.
- **Extensibilit√©** : Ajout facile de nouveaux composants GUI ou parsers.
- **Maintenabilit√©** : Structure claire pour les nouveaux d√©veloppeurs.

---

## Description des Composants

### `MainWindow` (`gui/main_window.py`)

**R√¥le** : Orchestrateur principal, gestion des √©v√©nements et coordination des composants.

```python
class MainWindow(QMainWindow):
    # Responsabilit√©s :
    # - Gestion du cycle de vie et des √©v√©nements principaux.
    # - Coordination entre tous les panneaux (Navigation, Plan, √âditeur, Aper√ßu).
    # - Cr√©ation des menus, barres d'outils et de la barre de statut.
    # - Logique de gestion des fichiers (ouverture, sauvegarde, export HTML et PDF).
    # - Interface avec le syst√®me de gestion des param√®tres.
```

**Fonctionnalit√©s cl√©s** :
- **Timer de mise √† jour** : √âvite les rafra√Æchissements trop fr√©quents de l'aper√ßu (300ms).
- **Gestion d'√©tat** : Suivi des modifications, fichier actuel.
- **Signaux PyQt5** : Communication asynchrone entre composants.
- **Validation de fermeture** : Protection contre la perte de donn√©es.

### `Editor` (`gui/editor.py`)

**R√¥le** : √âditeur de texte avec coloration syntaxique Markdown.

```python
class MarkdownEditor(QWidget):
    # Composants int√©gr√©s :
    # - QTextEdit : Zone de saisie
    # - MarkdownHighlighter : Coloration syntaxique
    # - LineNumberArea : Affichage des num√©ros de ligne
```

**Architecture de la coloration syntaxique** :

```python
class MarkdownHighlighter(QSyntaxHighlighter):
    def highlightBlock(self, text):
        # Regex patterns pour :
        # - Titres (# ## ###)
        # - Emphases (**gras**, *italique*)  
        # - Code (`inline`, ```blocks```)
        # - Liens, Tags, etc.
```

### `Preview` (`gui/preview.py`)

**R√¥le** : Rendu HTML en temps r√©el avec QWebEngine.

```python
class MarkdownPreview(QWidget):
    # Pipeline de rendu :
    # Markdown ‚Üí python-markdown ‚Üí HTML + CSS ‚Üí QWebEngine
```

**Extensions Markdown utilis√©es** :
- `tables`, `fenced_code`, `codehilite`, `toc`, `attr_list`, `footnotes`, `sane_lists`.

**Affichage des images locales** :
Pour des raisons de s√©curit√©, `QWebEngine` bloque par d√©faut l'acc√®s aux fichiers locaux. Pour contourner ce probl√®me, la m√©thode `setHtml` est appel√©e avec une URL de base `file:///`, autorisant ainsi le chargement des images via des chemins absolus.

---

## Fonctionnalit√©s D√©taill√©es

### Exportation du Journal en PDF

La version 2.0.2 introduit une fonctionnalit√© d'exportation PDF avanc√©e, utilisant la biblioth√®que **WeasyPrint** pour un rendu de haute qualit√© et une pagination pr√©cise.

#### 1. D√©pendance

Cette fonctionnalit√© requiert l'installation de WeasyPrint :
```bash
pip install weasyprint
```
L'application g√®re l'absence de cette biblioth√®que en affichant un message d'erreur informatif √† l'utilisateur.

#### 2. Processus d'Exportation

L'exportation est d√©clench√©e via `Fichier > Exporter Journal PDF...`.

1.  **Bo√Æte de dialogue de configuration** : Une fen√™tre modale (`ExportPdfDialog`) permet √† l'utilisateur de personnaliser l'export :
    *   **Plage de dates** : S√©lection des dates de d√©but et de fin. Par d√©faut, la plage couvre l'int√©gralit√© du journal.
    *   **Titre du document** : Titre pour la page de garde (d√©faut : "BlueNotebook Journal").
    *   **Nom de l'auteur**.
    *   **Photo de couverture** : Une image (JPG/PNG) pour la page de garde.

2.  **Persistance des param√®tres** : Pour am√©liorer l'exp√©rience utilisateur, les param√®tres suivants sont sauvegard√©s dans `settings.json` et r√©utilis√©s lors des exports futurs :
    *   Le dernier r√©pertoire de destination utilis√©.
    *   Le titre du document.
    *   Le nom de l'auteur.

3.  **G√©n√©ration du HTML** :
    *   Une m√©thode `_prepare_pdf_html` collecte les notes dans la plage de dates s√©lectionn√©e.
    *   Elle g√©n√®re un document HTML unique qui inclut :
        *   Une **page de garde** (`cover_page.html`) avec le titre, l'auteur, la photo, le logo et la plage de dates.
        *   Le contenu de chaque note, converti de Markdown en HTML.
        *   Des sauts de page CSS (`page-break-before: always`) sont ins√©r√©s avant chaque nouvelle note.
        *   Le m√™me th√®me CSS que l'aper√ßu HTML est appliqu√© pour une coh√©rence visuelle.

4.  **G√©n√©ration Asynchrone du PDF** :
    *   La conversion du HTML en PDF, potentiellement longue, est effectu√©e dans un **thread s√©par√©** (`QThreadPool`) pour ne pas bloquer l'interface utilisateur.
    *   Pendant la g√©n√©ration, un message clignotant "Veuillez patienter..." est affich√© dans la barre de statut.
    *   La classe `PdfGenerator` (h√©ritant de `QRunnable`) utilise `weasyprint.HTML().write_pdf()` pour cr√©er le fichier.

5.  **Structure du PDF final** :
    *   **Page de garde** : Titre, auteur, photo, etc.
    *   **Notes** : Chaque note sur une nouvelle page.
    *   **Pagination** : Un pied de page avec le num√©ro de page (`Page X / Y`) est automatiquement ajout√© par WeasyPrint gr√¢ce aux r√®gles CSS `@page`.

#### 3. Diagramme de S√©quence

```mermaid
sequenceDiagram
    participant User
    participant MainWindow
    participant ExportPdfDialog
    participant PdfGenerator

    User->>MainWindow: Clique "Exporter Journal PDF..."
    MainWindow->>ExportPdfDialog: Cr√©e et affiche la dialogue
    User->>ExportPdfDialog: S√©lectionne dates, titre, etc.
    ExportPdfDialog-->>MainWindow: Dialogue accept√©e avec les options
    MainWindow->>MainWindow: _prepare_pdf_html()
    MainWindow->>MainWindow: Affiche "Veuillez patienter..."
    MainWindow->>PdfGenerator: Lance la g√©n√©ration asynchrone
    PdfGenerator->>PdfGenerator: weasyprint.HTML(html).write_pdf()
    PdfGenerator-->>MainWindow: √âmet signal pdf_generated(path)
    MainWindow->>MainWindow: Affiche "PDF g√©n√©r√© avec succ√®s"
```

### Gestion du r√©pertoire Journal

L'application g√®re un r√©pertoire "Journal" pour stocker les notes quotidiennes.

**Priorit√© de configuration du r√©pertoire :**
1.  **Argument de ligne de commande** : `--journal "/chemin/vers/journal"`
2.  **Variable d'environnement** : `JOURNAL_DIRECTORY`
3.  **R√©pertoire par d√©faut** : `~/bluenotebook` (cr√©√© s'il n'existe pas).

**Fonctionnalit√©s du Journal :**
-   Au lancement, l'application ouvre automatiquement le fichier journal du jour (`YYYYMMJJ.md`).
-   La sauvegarde via `Fichier > Sauvegarder` enregistre dans le fichier journal du jour. Si le fichier existe, l'utilisateur peut choisir de remplacer son contenu ou d'ajouter le nouveau contenu √† la fin.
-   Le menu `Fichier > Ouvrir Journal` permet de s√©lectionner un nouveau r√©pertoire de journal √† la vol√©e.

### Aide en ligne

L'application inclut une documentation en ligne accessible via le menu `Aide > Documentation en ligne`.
-   Le contenu de l'aide est un fichier HTML (`aide_en_ligne.html`) situ√© dans `resources/html/`.
-   Un clic sur l'option de menu ouvre ce fichier dans le navigateur web par d√©faut de l'utilisateur.

### Gestion des Tags et des Mots

Le syst√®me de tags (`@@tag`) et l'indexation full-text des mots sont des fonctionnalit√©s centrales pour l'organisation et la recherche.

#### 1. Indexation Asynchrone

Au d√©marrage, les classes `TagIndexer` et `WordIndexer` (h√©ritant de `QRunnable`) scannent le r√©pertoire du journal dans des threads s√©par√©s.
- **D√©clenchement** : L'indexation est lanc√©e si des notes ont √©t√© modifi√©es depuis la derni√®re session.
- **Sortie** : Des fichiers `index_tags.json` et `index_words.json` sont g√©n√©r√©s, contenant les occurrences, le contexte, la date et le num√©ro de ligne pour chaque tag/mot.

#### 2. Recherche

L'interface de recherche dans le panneau de navigation utilise ces fichiers JSON pour fournir des r√©sultats instantan√©s.
- **Requ√™te** : L'utilisateur tape un mot ou un tag (pr√©fix√© par `@@`).
- **R√©sultats** : Un panneau de r√©sultats affiche les occurrences tri√©es par date.
- **Navigation** : Un clic sur un r√©sultat ouvre la note correspondante et positionne le curseur directement √† la bonne ligne.

---

## Arborescence Compl√®te des Menus

Voici une vue d'ensemble de tous les menus de l'application, avec une description d√©taill√©e de chaque action.

```
üìÅ Fichier
‚îú‚îÄ‚îÄ üìÑ Nouveau (Ctrl+N) : Cr√©e une nouvelle note vierge avec le mod√®le par d√©faut.
‚îú‚îÄ‚îÄ üìÇ Ouvrir (Ctrl+O) : Ouvre un fichier Markdown existant depuis votre ordinateur.
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ üíæ Sauvegarder (Ctrl+S) : Enregistre la note actuelle. Si c'est une nouvelle note, elle devient la note du jour.
‚îú‚îÄ‚îÄ üíæ Sauvegarder sous... (Ctrl+Shift+S) : Enregistre la note actuelle dans un nouveau fichier de votre choix.
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ üìì Ouvrir Journal : Permet de s√©lectionner un nouveau dossier qui servira de journal.
‚îú‚îÄ‚îÄ üíæ Sauvegarde Journal... : Cr√©e une archive ZIP compl√®te de votre journal actuel.
‚îú‚îÄ‚îÄ üîÑ Restauration Journal... : Restaure un journal √† partir d'une archive ZIP (votre journal actuel est sauvegard√© avant).
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ üìÑ Exporter Journal PDF... : Cr√©e un document PDF de votre journal, avec s√©lection de dates, titre et auteur.
‚îú‚îÄ‚îÄ üåê Exporter HTML... : Exporte la note actuelle au format HTML, avec le style appliqu√©.
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ ‚öôÔ∏è Pr√©f√©rences... : Ouvre la fen√™tre de personnalisation de l'application.
‚îî‚îÄ‚îÄ üö™ Quitter (Ctrl+Q) : Ferme BlueNotebook.

‚úèÔ∏è Edition
‚îú‚îÄ‚îÄ ‚Ü©Ô∏è Annuler (Ctrl+Z) : Annule la derni√®re action de frappe ou de formatage.
‚îú‚îÄ‚îÄ ‚Ü™Ô∏è R√©tablir (Ctrl+Y) : R√©tablit la derni√®re action annul√©e.
‚îú‚îÄ‚îÄ ---
‚îî‚îÄ‚îÄ üîç Rechercher (Ctrl+F) : Ouvre une bo√Æte de dialogue pour rechercher du texte dans l'√©diteur.

üëÅÔ∏è Affichage
‚îú‚îÄ‚îÄ üß≠ Basculer Navigation Journal (F6) : Affiche ou masque le panneau de gauche (calendrier, recherche, nuages).
‚îú‚îÄ‚îÄ üìú Basculer Plan du document (F7) : Affiche ou masque le panneau central qui liste les titres du document.
‚îî‚îÄ‚îÄ üëÅÔ∏è Basculer Aper√ßu HTML (F5) : Affiche ou masque le panneau de droite qui montre le rendu de votre note.

üé® Formater
‚îú‚îÄ‚îÄ üìú Titres
‚îÇ   ‚îú‚îÄ‚îÄ 1Ô∏è‚É£ Niv 1 (#) : Applique un titre de niveau 1.
‚îÇ   ‚îú‚îÄ‚îÄ 2Ô∏è‚É£ Niv 2 (##) : Applique un titre de niveau 2.
‚îÇ   ‚îú‚îÄ‚îÄ 3Ô∏è‚É£ Niv 3 (###) : Applique un titre de niveau 3.
‚îÇ   ‚îú‚îÄ‚îÄ 4Ô∏è‚É£ Niv 4 (####) : Applique un titre de niveau 4.
‚îÇ   ‚îî‚îÄ‚îÄ 5Ô∏è‚É£ Niv 5 (#####) : Applique un titre de niveau 5.
‚îú‚îÄ‚îÄ üé® Style de texte
‚îÇ   ‚îú‚îÄ‚îÄ üÖ±Ô∏è Gras (**texte**) : Met le texte s√©lectionn√© en gras.
‚îÇ   ‚îú‚îÄ‚îÄ *Ô∏è‚É£ Italique (*texte*) : Met le texte s√©lectionn√© en italique.
‚îÇ   ‚îú‚îÄ‚îÄ ~ Barr√© (~~texte~~) : Barre le texte s√©lectionn√©.
‚îÇ   ‚îî‚îÄ‚îÄ üñçÔ∏è Surlign√© (==texte==) : Surligne le texte s√©lectionn√©.
‚îú‚îÄ‚îÄ üíª Code
‚îÇ   ‚îú‚îÄ‚îÄ ` Monospace (inline) : Formate la s√©lection comme du code en ligne.
‚îÇ   ‚îî‚îÄ‚îÄ ``` Bloc de code : Encadre la s√©lection dans un bloc de code.
‚îú‚îÄ‚îÄ üìã Listes
‚îÇ   ‚îú‚îÄ‚îÄ ‚Ä¢ Liste non ordonn√©e : Transforme les lignes s√©lectionn√©es en liste √† puces.
‚îÇ   ‚îú‚îÄ‚îÄ 1. Liste ordonn√©e : Transforme les lignes s√©lectionn√©es en liste num√©rot√©e.
‚îÇ   ‚îî‚îÄ‚îÄ ‚òëÔ∏è Liste de t√¢ches : Transforme les lignes s√©lectionn√©es en liste de t√¢ches.
‚îú‚îÄ‚îÄ ---
‚îî‚îÄ‚îÄ üßπ RaZ (Effacer le formatage) : Supprime tout le formatage Markdown de la s√©lection.

‚ûï Ins√©rer
‚îú‚îÄ‚îÄ üñºÔ∏è Image (<img ...>) (Ctrl+I) : Ins√®re une image via une balise HTML `<img>`.
‚îú‚îÄ‚îÄ üñºÔ∏è Image Markdown (Ctrl+Shift+I) : Ins√®re une image avec la syntaxe Markdown `!`.
‚îú‚îÄ‚îÄ üîó Lien (URL ou email) (<url>) : Encadre une URL pour la rendre cliquable.
‚îú‚îÄ‚îÄ üîó Lien Markdown (texte) : Cr√©e un lien hypertexte avec la syntaxe ``.
‚îú‚îÄ‚îÄ üîó Fichier : Ins√®re un lien vers un fichier local de votre ordinateur.
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ ‚ûñ Ligne Horizontale : Ins√®re une ligne de s√©paration (`---`).
‚îú‚îÄ‚îÄ üí¨ Commentaire HTML : Transforme la s√©lection en commentaire HTML (`<!-- ... -->`).
‚îú‚îÄ‚îÄ ‚ñ¶ Tableau : Ins√®re un mod√®le de tableau Markdown.
‚îú‚îÄ‚îÄ üí¨ Citation : Formate la s√©lection comme une citation (`> ...`).
‚îú‚îÄ‚îÄ ---
‚îú‚îÄ‚îÄ üè∑Ô∏è Tag (@@) : Ins√®re un tag `@@` ou transforme la s√©lection en tag.
‚îú‚îÄ‚îÄ üïí Heure : Ins√®re l'heure actuelle (HH:MM).
‚îú‚îÄ‚îÄ ---
‚îî‚îÄ‚îÄ üòä Emoji : Ouvre un sous-menu pour ins√©rer rapidement des emojis courants.
    ‚îú‚îÄ‚îÄ ... (Liste compl√®te des emojis)

üîå Int√©grations
‚îî‚îÄ‚îÄ ‚ú® Citation du jour : Ins√®re la citation du jour (r√©cup√©r√©e depuis Internet) dans votre note.

‚ùì Aide
‚îú‚îÄ‚îÄ üåê Documentation en ligne : Ouvre le manuel d'aide dans votre navigateur.
‚îî‚îÄ‚îÄ üí° √Ä propos : Affiche les informations sur l'application, sa version et sa licence.
```

---

## Performance et optimisations

### Optimisations CPU

- **Coloration syntaxique incr√©mentale** : Seuls les blocs modifi√©s sont r√©analys√©s.
- **Rendu HTML diff√©r√©** : L'aper√ßu n'est pas mis √† jour √† chaque frappe, mais apr√®s une courte pause (300ms).
- **Indexation et Export PDF asynchrones** : Les t√¢ches longues s'ex√©cutent en arri√®re-plan pour ne pas geler l'interface.
- **Cache des expressions r√©guli√®res** compil√©es pour la coloration syntaxique.

### Optimisations I/O

- **Indexation conditionnelle** : Les index ne sont reconstruits que si les fichiers du journal ont √©t√© modifi√©s.
- **D√©tection d'encodage** optimis√©e lors de la lecture des fichiers.

---

## √âvolutions possibles

### Fonctionnalit√©s core (Priorit√© haute)

#### 1. Mode sombre / Th√®mes personnalisables
```python
class ThemeManager:
    def apply_theme(self, theme_name: str):
        # Application CSS dynamique
        # Mise √† jour des couleurs de coloration syntaxique  
        # Persistance des pr√©f√©rences utilisateur
```
**Impact** : Am√©lioration significative de l'exp√©rience utilisateur, r√©duction de la fatigue oculaire.

#### 2. Gestion de projets multi-fichiers
```python
class ProjectManager:
    def __init__(self):
        self.project_tree = {}  # Arbre des fichiers
        self.watcher = QFileSystemWatcher()  # Surveillance changements
```
**Fonctionnalit√©s** : Navigation dans une arborescence de fichiers, recherche full-text sur le projet.

### Fonctionnalit√©s avanc√©es (Priorit√© moyenne)

#### 3. Aper√ßu synchronis√© avec scroll li√©
```python
class SyncedPreview(MarkdownPreview):
    def sync_scroll_position(self, editor_position: float):
        # Calcul de correspondance ligne ‚Üî √©l√©ment HTML
        # Animation fluide du scroll
```
**D√©fis techniques** : Mapping pr√©cis entre texte source et DOM.

#### 4. Support LaTeX/MathJax pour formules math√©matiques
```python
# Extension Markdown personnalis√©e
class MathExtension(Extension):
    def extendMarkdown(self, md):
        # Pattern recognition : $inline$ et $$block$$  
        # Rendu MathJax dans QWebEngine
```

#### 5. Syst√®me de plugins pour extensions
```python
class PluginManager:
    def load_plugin(self, plugin_path: str):
        # Chargement dynamique des modules Python
        # API standardis√©e pour extensions
```

### Am√©liorations techniques

#### 6. Architecture modulaire avanc√©e
```python
# Syst√®me d'√©v√©nements d√©coupl√©
class EventBus:
    def emit(self, event: str, data: Any): ...
    def subscribe(self, event: str, handler: callable): ...

# Injection de d√©pendances
class DIContainer:
    def register(self, interface: type, implementation: type): ...
    def resolve(self, interface: type) -> Any: ...
```

#### 7. Int√©gration Git
```python
class GitIntegration:
    def __init__(self, repo_path: str):
        self.repo = git.Repo(repo_path)
        
    def show_diff(self, file_path: str):
        # Affichage diff√©rences dans interface
        # Commit et push directement depuis l'√©diteur
```

---

## Conclusion

BlueNotebook repr√©sente une architecture moderne et extensible pour un √©diteur Markdown. Les choix techniques (PyQt5, QWebEngine, WeasyPrint) offrent un √©quilibre optimal entre performance, fonctionnalit√©s et maintenabilit√©.

L'architecture modulaire permet une √©volution progressive vers un √©cosyst√®me complet d'√©dition technique, tout en conservant la simplicit√© d'usage qui fait le succ√®s des √©diteurs Markdown.

---

*Documentation technique v2.0.2 - BlueNotebook*  
*G√©n√©r√©e le : 04 Octobre 2025*