# Forcer la traduction des dialogues standards de Qt en Français

## Problème

Certaines boîtes de dialogue standards de l'application (par exemple, le sélecteur de fichiers `QFileDialog` ou les messages de confirmation `QMessageBox`) affichent des boutons en anglais ("Open", "Save", "Cancel", "Yes", "No") même si le système d'exploitation est configuré en français.

## Cause

Cela se produit car les textes de ces composants standards ne proviennent pas de votre code, mais de la bibliothèque Qt elle-même. Par défaut, une application PyQt5 ne charge que les textes standards en anglais. Pour afficher ces dialogues dans une autre langue, il faut explicitement charger les fichiers de traduction fournis par Qt.

## Solution

La solution consiste à ajouter quelques lignes de code au démarrage de l'application (dans `main.py`) pour détecter la langue du système et charger le fichier de traduction correspondant (`qtbase_fr.qm` pour le français).

### Étapes

1.  **Importer les classes nécessaires** : `QTranslator`, `QLocale`, et `QLibraryInfo` de `PyQt5.QtCore`.
2.  **Détecter la langue du système** : Utiliser `QLocale.system()` pour obtenir la locale de l'utilisateur (ex: `fr_FR`).
3.  **Trouver et charger le fichier de traduction** : Utiliser `QLibraryInfo` pour localiser le dossier des traductions de Qt et y charger le fichier `qtbase` correspondant à la locale.
4.  **Installer le traducteur** : Appeler `app.installTranslator()` pour activer les traductions dans toute l'application.

### Implémentation dans `main.py`

Voici le code à ajouter dans la fonction `main()` de votre fichier `main.py`, juste après la création de l'objet `QApplication`.

```python
import sys
import os
import argparse

sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from PyQt5.QtWidgets import QApplication
from PyQt5.QtCore import QTranslator, QLocale, QLibraryInfo  # <-- Importer les classes
from gui.main_window import MainWindow

def main():
    # ... (parsing des arguments) ...
    try:
        app = QApplication(sys.argv)

        # --- Internationalisation (i18n) des composants standards Qt ---
        qt_translator = QTranslator()
        locale = QLocale.system()
        qt_translation_path = QLibraryInfo.location(QLibraryInfo.TranslationsPath)
        if qt_translator.load(locale, "qtbase", "_", qt_translation_path):
            app.installTranslator(qt_translator)

        # ... (suite du code de démarrage) ...
```


### Explication du code ajouté
- Imports : On importe QTranslator, QLocale, et QLibraryInfo qui sont les outils nécessaires.
- Détection de la langue : QLocale.system() détecte la langue configurée sur l'ordinateur de l'utilisateur (ex: fr_FR).
- Chargement du traducteur :
1. On crée un objet QTranslator.

2. On utilise QLibraryInfo.location(QLibraryInfo.TranslationsPath) pour demander à Qt où il stocke ses propres fichiers de traduction. C'est la méthode la plus propre et la plus portable.

3. On tente de charger le fichier de traduction correspondant à la langue détectée (par exemple qtbase_fr.qm).

- Plan B (pour le déploiement) : Si le chargement depuis le chemin système échoue (ce qui peut arriver si l'application est packagée pour la distribution), le code tente de charger le fichier depuis un dossier resources/translations à l'intérieur de votre projet. Pour que cela fonctionne, vous devriez y copier manuellement le fichier qtbase_fr.qm que vous trouverez dans votre environnement virtuel PyQt5.
- Installation : Si le chargement réussit, app.installTranslator(qt_translator) active les traductions pour toute l'application.

Avec cette simple modification, toutes les boîtes de dialogue standards comme QFileDialog ou QMessageBox utiliseront désormais les textes en français ("Ouvrir", "Annuler", "Oui", "Non", etc.), rendant votre application beaucoup plus professionnelle et cohérente pour les utilisateurs francophones.

