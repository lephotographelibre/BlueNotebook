# Comment créer et installer un lanceur .desktop pour BlueNotebook sur Linux

Créer un fichier `.desktop` est la méthode standard sur Linux pour intégrer une application à l'environnement de bureau (GNOME, KDE, XFCE, etc.). Cela permet de lancer votre programme depuis le menu des applications, comme n'importe quel autre logiciel.

## Qu'est-ce qu'un fichier `.desktop` ?

Un fichier `.desktop` est un simple fichier texte qui sert de "raccourci" ou de "lanceur". Il contient des métadonnées sur votre application :
-   Son nom
-   Son icône
-   La commande pour la lancer
-   Sa catégorie dans les menus

## Étape 1 : Créer le fichier `bluenotebook.desktop`

1.  Créez un nouveau fichier texte nommé `bluenotebook.desktop`.
2.  Collez-y le contenu suivant, qui est pré-configuré avec les chemins de votre projet :

```desktop
[Desktop Entry]
Version=1.0
Name=BlueNotebook
Comment=Éditeur de journal Markdown avec aperçu en temps réel
Exec=/home/jm/PycharmProjects/BlueNotebook/bluenotebook/run_bluenotebook.sh --journal "/ssd/Dropbox/bluenotebook"
Icon=/home/jm/PycharmProjects/BlueNotebook/bluenotebook/resources/images/bluenotebook_256-x256_fond_blanc.png
Terminal=false
Type=Application
Categories=Office;TextEditor;Development;
StartupNotify=true
```

### Explication des champs

-   `Name`: Le nom qui apparaîtra dans le menu des applications.
-   `Comment`: Une courte description visible au survol de l'icône.
-   `Exec`: La commande exacte pour lancer votre application.
-   `Icon`: Le chemin absolu vers l'icône de votre application.
-   `Terminal=false`: Indique que l'application n'a pas besoin d'une fenêtre de terminal pour s'exécuter.
-   `Type=Application`: Définit ce fichier comme un lanceur d'application.
-   `Categories`: Aide le bureau à classer votre application dans les bons menus (ex: "Bureautique").

## Étape 2 : Rendre le script de lancement exécutable

Le fichier `.desktop` pointe vers `run_bluenotebook.sh`. Il est crucial que ce script soit exécutable. Si ce n'est pas déjà fait, ouvrez un terminal et lancez cette commande :

```bash
chmod +x /home/jm/PycharmProjects/BlueNotebook/bluenotebook/run_bluenotebook.sh
```

## Étape 3 : Installer le lanceur sur votre système

Pour que votre environnement de bureau reconnaisse ce lanceur, vous devez le copier dans un répertoire spécifique.

### Option 1 : Installation pour l'utilisateur courant (recommandé)

Le lanceur ne sera visible que pour votre session utilisateur (`jm`). C'est la méthode la plus simple et la plus sûre.

-   **Répertoire de destination** : `~/.local/share/applications/`
-   **Commande à exécuter :**
    ```bash
    cp /chemin/vers/votre/projet/bluenotebook.desktop ~/.local/share/applications/
    ```

### Option 2 : Installation pour tous les utilisateurs du système

Le lanceur sera visible pour tous les utilisateurs de la machine. Cela nécessite les droits d'administrateur (`sudo`).

-   **Répertoire de destination** : `/usr/share/applications/`
-   **Commande à exécuter :**
    ```bash
    sudo cp /chemin/vers/votre/projet/bluenotebook.desktop /usr/share/applications/
    ```

Une fois le fichier copié, votre environnement de bureau devrait automatiquement détecter la nouvelle application. Vous pourrez la trouver en cherchant "BlueNotebook" dans votre menu d'applications.

## Amélioration : Un script d'installation

Pour automatiser ce processus, vous pouvez utiliser le script `install.sh` que nous avons créé. Il se charge de générer le fichier `.desktop` avec les bons chemins et de le copier au bon endroit pour l'utilisateur courant.

Pour l'utiliser :

1.  Assurez-vous qu'il est exécutable :
    ```bash
    chmod +x install.sh
    ```
2.  Lancez-le depuis la racine du projet :
    ```bash
    ./install.sh
    ```

Ce script rend l'installation de BlueNotebook beaucoup plus simple et professionnelle.