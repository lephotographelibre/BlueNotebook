## **Chapitre X : Installation, Configuration et Lancement**

Ce chapitre décrit la procédure pour installer, configurer et lancer l'application BlueNotebook sur un système d'exploitation Linux.

### **X.1. Prérequis**

L'application utilise `pyenv` pour gérer la version de Python, garantissant ainsi un environnement stable et reproductible.

*   **pyenv** : Outil de gestion de versions Python. Si vous ne l'avez pas, il est fortement recommandé de l'installer en suivant les instructions sur le [dépôt officiel de pyenv](https://github.com/pyenv/pyenv#installation).
*   **Dépendances de build Python** : Assurez-vous d'avoir les paquets nécessaires pour compiler des versions de Python (ex: `build-essential`, `libssl-dev`, `zlib1g-dev`, etc.).

### **X.2. Installation des Dépendances**

Le projet est fourni avec des scripts qui automatisent entièrement le processus d'installation.

1.  **Clonez ou téléchargez le projet** sur votre machine.
2.  Ouvrez un terminal et naviguez jusqu'au répertoire `bluenotebook/`.
3.  Rendez le script de lancement exécutable (cette commande n'est à faire qu'une seule fois) :
    ```bash
    chmod +x run_bluenotebook.sh
    ```
4.  Exécutez le script :
    ```bash
    ./run_bluenotebook.sh
    ```

Lors de sa première exécution, le script effectuera les actions suivantes :
*   Il vérifiera si `pyenv` est installé.
*   Il installera la version de Python requise (définie dans le script, ex: `3.13.5`) si elle n'est pas déjà disponible via `pyenv`.
*   Il créera un environnement virtuel dédié à l'application (ex: `.venv_bluenotebook`).
*   Il installera toutes les dépendances Python listées dans le fichier `requirements.txt` à l'intérieur de cet environnement virtuel.

### **X.3. Lancement de l'Application**

Une fois l'installation terminée, pour lancer BlueNotebook, exécutez simplement le même script depuis le répertoire `bluenotebook/` :

```bash
./run_bluenotebook.sh
```

Vous pouvez également passer des arguments. L'argument `--journal` est particulièrement utile pour spécifier un répertoire de journal au démarrage, surchargeant toute autre configuration :

```bash
./run_bluenotebook.sh --journal /home/user/Documents/MonAutreJournal
```

### **X.4. Intégration au Bureau Linux (Fichier .desktop)**

Pour lancer BlueNotebook depuis le menu de vos applications comme n'importe quel autre logiciel, vous pouvez créer un fichier `.desktop`.

1.  Créez un fichier nommé `bluenotebook.desktop` dans le répertoire `~/.local/share/applications/`.

2.  Collez le contenu suivant dans le fichier. **Attention :** vous devez remplacer `/chemin/absolu/vers/bluenotebook` par le chemin complet où vous avez cloné le projet.

    ```ini
    [Desktop Entry]
    Version=1.0
    Name=BlueNotebook
    Comment=Éditeur de journal personnel en Markdown
    Exec=/chemin/absolu/vers/bluenotebook/run_bluenotebook.sh
    Icon=/chemin/absolu/vers/bluenotebook/resources/images/bluenotebook_256-x256_fond_blanc.png
    Terminal=false
    Type=Application
    Categories=Office;TextEditor;Journal;
    ```

3.  Sauvegardez le fichier. BlueNotebook devrait maintenant apparaître dans le menu de vos applications.

### **X.5. Configuration Avancée via l'Environnement**

BlueNotebook peut être configuré à l'aide de variables d'environnement. Celles-ci peuvent être définies dans votre fichier de profil de shell (ex: `~/.bashrc`, `~/.zshrc`) ou directement avant de lancer le script.

#### **Définir le Répertoire du Journal (JOURNAL_DIRECTORY)**

C'est la variable la plus importante. Elle indique à BlueNotebook où trouver et stocker vos notes.

```bash
export JOURNAL_DIRECTORY="/ssd/Dropbox/BlueNotebookJournal/"
```

**Ordre de priorité pour le répertoire du journal :**
1.  Argument de ligne de commande : `--journal /path/to/journal` (priorité la plus haute).
2.  Variable d'environnement : `JOURNAL_DIRECTORY`.
3.  Répertoire par défaut : `~/bluenotebook` (priorité la plus basse).

#### **Forcer la Langue de l'Application (BLUENOTEBOOK_LOCALE)**

Par défaut, BlueNotebook essaie d'utiliser la langue de votre système pour les dialogues standards de Qt (Ouvrir, Sauvegarder, etc.). Vous pouvez forcer une locale spécifique avec cette variable.

Par exemple, pour forcer l'allemand :
```bash
export BLUENOTEBOOK_LOCALE="de_DE"
```
Pour revenir au français :
```bash
export BLUENOTEBOOK_LOCALE="fr_FR"
```

#### **Définir le Répertoire de Sauvegarde (BACKUP_DIRECTORY)**

Cette variable permet de définir le dossier qui sera proposé par défaut lors de la création d'une sauvegarde du journal (`Fichier > Sauvegarde Journal...`).

```bash
export BACKUP_DIRECTORY="/media/user/DisqueExterne/Sauvegardes"
```

#### **Exemple d'Utilisation Combinée**

Vous pouvez définir ces variables directement avant de lancer l'application pour une session unique :

```bash
JOURNAL_DIRECTORY="/home/user/travel_log" BLUENOTEBOOK_LOCALE="en_US" ./run_bluenotebook.sh
```
Cette commande lancera BlueNotebook en utilisant le dossier `travel_log` comme journal et avec une interface Qt en anglais américain.