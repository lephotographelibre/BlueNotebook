## V2.7.6 Migration HTML -> Markdown

### Objectifs

J'ai besoin de voir plus clair que ce qu'il est possible de faire avec Markdown sans HTML et ce qui est implémenté !!
Car ce n'est pas consistant et trop de solution. A terme il est nécessaire d'essayer de mettre en oeuvre unique du pur Markdown et de traite en Python les fonctionnalités manquantes :

- figcaption --> Ajout d'un cartouche blanc en dessous l'image pour les légendes par programme
-  width="400"  --> Redimentionnement par programme

Certaine fonctionnalités d'affichage des images pourront etre mises en oeuvre dans du CSS externalisé dans  `default_bluenotebook.css`

Je vais faire les tests pour deux images:
- Locale: `Téléchargement/lemonde_meloni1.jpg`
- distante: <https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg>

**KISS = Keep i Simple Stupid !**

### Status actuel

Actuellement j'ai plusieurs moyens pour inserer des images dans Bluenotebook

1: **- Image (<img>) : Insère une image via une balise HTML. Copie les images locales dans le journal.**

<a href="images/20251025155248_lemonde_meloni1.jpg" target="_blank"><img src="images/20251025155248_lemonde_meloni1.jpg" width="400" alt="Image"></a>



<a href="https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg" target="_blank"><img src="https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg" width="400" alt="Image"></a>

⚠️⚠️⚠️⚠️ ==Les images distantes ne sont pas copiées dans le dossier `images` du Journal== et donc un risque que le journal ne puisse plus les afficher si elles ne sont plus accessibles

Le rendu utilise les additions CSS de `default_bluenotebook.css`

```css
/* Styles pour les images cliquables */
a img {
    transition: border 0.2s ease, opacity 0.2s ease;
}

a img:hover {
    border: 2px solid #3498db;
    opacity: 0.9;
}
```

Idéalement cette option d'insertion d'image sera concervé comme un Intégration il conviendra d'y ajouter une possibilité de rajouter `figcaption` optionnelement et corriger le cas des images distantes:
- Déplacer le menu dans integration sous le nom `Images HTML`
- copie en local dans le dossier `images` du Journal
- le click sur cette image ouvrira l'image local dans le navigateur


2: **- Image Markdown : Insère une image avec la syntaxe Markdown `!`. Copie les images locales dans le journal.**

![](images/20251025155801_lemonde_meloni1.jpg)

![](https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg)

Le code généré dans l'aperçu HTML est 

```html
<p><img alt="" src="images/20251025155801_lemonde_meloni1.jpg" /></p>
<p><img alt="" src="https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg" /></p>

```
⚠️⚠️⚠️⚠️ Les images Markdown telles qu'elles ne sont pas clickables et pas redimentionnées et pas de support de CSS (pas de balise a)

Cela doit devenir le chloix Numéro 1 pour l'insertion d'images (pur Markdown):

- Rendre clickable les images (balise a générée)
- Copie des images remotes dans le dossier  `images` du Journal
- Mise en place du programme pour le redimenssionnement et figcaption
- Support CSS balise a

[![(images/20251025155801_lemonde_meloni1.jpg)](images/20251025155801_lemonde_meloni1.jpg)

[![Meloni](images/20251025155801_lemonde_meloni1.jpg)](images/20251025155801_lemonde_meloni1.jpg) OK

 

3: **Lien (URL ou email) () : Encadre une URL pour la rendre cliquable.**

<https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg>

4: **Lien Markdown**

[Image Meloni](https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg) sans affichage juste le lien

[![Image Meloni](https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg)](https://img.lemde.fr/2025/10/13/0/0/5426/3617/960/0/75/0/a52a250_ftp-import-images-1-wwvs3r1esp5d-5157862-01-06.jpg) avec affichage

5: **Carte GPS**


A la place de 

<figure style="text-align: center;">
    <a href="https://www.openstreetmap.org/#map=16/46.58325004582807/0.3438650843823104">
         <img src="images/20251025093445_carte_Poitiers.png" alt="Carte de Poitiers, coordonnées 46.58325004582807, 0.3438650843823104" width="800">
    </a>
    <figcaption style="font-weight: bold;">GPS: [46.58325004582807, 0.3438650843823104]  Poitiers</figcaption>
</figure>

On doit générere quelque chose comme (100% Markdown):

[![Carte de Poitiers, coordonnées 46.58325004582807, 0.3438650843823104](images/20251025093445_carte_Poitiers.png)](https://www.openstreetmap.org/#map=16/46.58325004582807/0.3438650843823104)

[GPS : [46.58325004582807, 0.3438650843823104] Poitiers --> Ouvrir la carte sur OpenStreetMap](https://www.openstreetmap.org/#map=16/46.58325004582807/0.3438650843823104)

 6: **Carte GPX**

Renforcer le code sur erreur -6> Plusieurs crash : exemple

- https://www.grandpoitiers.fr/fileadmin/Sports__culture_et_loisirs/Tourisme_et_loisirs/Se_balader/25BFeaturesToGPX.gpx
- https://www.grandpoitiers.fr/fileadmin/user_upload/14BFeaturesToGPX.gpx

Actuellement le code généré est le suivant:

<figure style="text-align: center;">
    <a href="https://www.openstreetmap.org/#map=16/47.38987/2.35644" target="_blank">
         <img src="images/20251025_Presly_gpx.png" alt="Trace GPX - Presly" width="800">
    </a>
    <figcaption style="font-weight: bold;">Trace GPX: <a href="https://www.openstreetmap.org/?mlat=47.38987&mlon=2.35644#map=16/47.38987/2.35644" target="_blank">Presly</a> - 25/10/2025 à 17:03</figcaption>
</figure>

il faudra générer quelque chose du type:

[![Trace GPX - Presly](images/20251025_Presly_gpx.png)](https://www.openstreetmap.org/#map=16/47.38987/2.35644)

**Trace GPX : [Presly](https://www.openstreetmap.org/?mlat=47.38987&mlon=2.35644#map=16/47.38987/2.35644) - 25/10/2025 à 17:03**

- convertir PNG to JPG (programme)
- Option taille de l'image en largeur (programme)


7: **Image avec Exif data**

**Actuellement Image HTML:**

<figure style="text-align: center;">
    <a href="images/20251025171801_PXL_20241106_093058864.jpg" target="_blank"><img src="images/20251025171801_PXL_20241106_093058864.jpg" width="400" alt="Image"></a>
    <figcaption style="font-weight: bold;"><a href="https://www.openstreetmap.org/?mlat=46.565814&mlon=0.359097#map=16/46.565814/0.359097">Poitiers</a> : 06/11/2024 10:30 : Google : Pixel 6a : ƒ/1.73 : Vitesse: 1/99s : Focale: 4.38mm : ISO: 79</figcaption>
</figure>


**Image Markdown:**

![](images/20251025171843_PXL_20241106_093058864.jpg)

⚠️⚠️⚠️⚠️  ==Pas de données Exif récupérées (pas de menu) et pas affichées==

Il faudrait générer

[![20251025171843_PXL_20241106_093058864.jpg](images/20251025171843_PXL_20241106_093058864.jpg)](20251025171843_PXL_20241106_093058864.jpg) 

[Poitiers](https://www.openstreetmap.org/?mlat=46.565814&mlon=0.359097#map=16/46.565814/0.359097) : **06/11/2024 10:30 : Google : Pixel 6a : ƒ/1.73 : Vitesse: 1/99s : Focale: 4.38mm : ISO: 79**

8: **Insérer Fichier**

Actuellemnt 

- Inserer fichier --> fichier local
- Insérer Lien Markdown --> fichier distant URL

⚠️⚠️⚠️⚠️  ==Trop compliqué, pas clair et redondance- Markdown mal assimilé==

**A refaire**


 


